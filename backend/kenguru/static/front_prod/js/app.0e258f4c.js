(function(){"use strict";var t={9273:function(t,e,a){var o=a(6369),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",{staticClass:"w-100"},[a("v-main",[a("home-view",{on:{showAlert:function(e){return t.showAlert(e)}}}),a("v-snackbar",{attrs:{color:"white"},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.attrs;return[a("v-btn",t._b({attrs:{color:"orange accent-2",tile:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",o,!1),[t._v(" Ок ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[a("span",{staticClass:"text-dark"},[t._v(t._s(t.snackbarText))])])],1)],1)],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100 h-100 px-3 pt-2 pb-5  d-flex flex-column  bg--warning align-self-center justify-center"},[a("div",{staticClass:"row "},[a("div",{staticClass:"col-12 col-sm-8 col-md-6 col-lg-5 col-xl-3 m-auto"},[a("div",{staticClass:"card shadow-lg p-3 text-center"},[t._m(0),t._m(1),"ok"===t.isLoad?a("form",{staticClass:"card-body text-center"},[a("div",{staticClass:"mb-5"},[a("v-autocomplete",{attrs:{label:"Маркет*","item-text":"name","no-data-text":"Маркет не найден","item-value":"id",messages:"Был: "+t.lastMarket,items:t.marketsList},model:{value:t.market,callback:function(e){t.market=e},expression:"market"}})],1),a("div",{staticClass:"mb-5"},[a("v-autocomplete",{attrs:{label:"Аудиоустройство*","item-text":"name",messages:"Было: "+t.lastAudio,"item-value":"id","no-data-text":"Не найдены аудиоустройства",items:t.audioList},model:{value:t.audio,callback:function(e){t.audio=e},expression:"audio"}})],1),a("div",{staticClass:"mb-5 mt-5"},[a("div",[t._v("IP: "+t._s(t.ip))]),a("small",[t._v("Синхронизация: "+t._s(t.dateUpdate))])]),a("v-btn",{staticClass:"px-5",attrs:{color:"warning",dark:"",disabled:!(t.market&&t.audio)},on:{click:t.save}},[t._v("Синхронизировать ")])],1):t._e(),"error"===t.isLoad?a("div",{staticClass:"card-body text-center"},[a("div",{staticClass:"mb-3"},[t._v(t._s(t.errorText))]),a("v-btn",{staticClass:"px-5",attrs:{color:"warning",dark:""},on:{click:t.refresh}},[t._v("Обновить ")])],1):t._e(),""===t.isLoad?a("div",{staticClass:"card-body text-center"},[a("p",[t._v("Загрузка...")])]):t._e()])])])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"text-center"},[o("img",{staticClass:"logo mb-3",attrs:{src:a(1637),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",[a("b",[t._v("КЕНГУРУ МАРКЕТ")])])}];let c="http://127.0.0.1:8001",l="http://crm.ikenguru.ru";var u={marketToken:"!!!ken!!!guru!!",urls:{autocomplete:`${l}/api1/market/autocomplete`,localSetting:`${c}/get_local_setting`}},d={getCookie(t){const e=`; ${document.cookie}`,a=e.split(`; ${t}=`);if(2===a.length)return a.pop().split(";").shift()},setCookie(t,e,a={}){a={path:"/",...a},a.expires instanceof Date&&(a.expires=a.expires.toUTCString());let o=encodeURIComponent(t)+"="+encodeURIComponent(e);for(let n in a){o+="; "+n;let t=a[n];!0!==t&&(o+="="+t)}document.cookie=o}},f={name:"HomeView",components:{},data(){return{market:"",audio:"",lastAudio:"н/д",lastMarket:"н/д",errorText:"",dateUpdate:"н/д",ip:"н/д",marketsList:[],audioList:[],isLoad:""}},created:async function(){this.refresh()},methods:{async getMarket(){const t=this;t.marketsList=[];try{const e=u.urls.autocomplete,a=await fetch(e,{method:"POST",body:JSON.stringify({token:u.marketToken}),headers:{"Content-Type":"application/json","X-CSRFToken":d.getCookie("csrftoken")}});200===a.status?t.marketsList=await a.json():(t.isLoad="error",this.$emit("showAlert","Ошибка  при обращение к CRM. Подробности в консоли"),t.errorText="Ошибка при обращение к CRM. Подробности в консоли")}catch(e){t.isLoad="error",this.$emit("showAlert","Ошибка при обращение к CRM. Подробности в консоли"),t.errorText="Ошибка при обращение к CRM. Подробности в консоли"}},async getLocalSetting(){const t=this;try{const e=u.urls.localSetting,a=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":d.getCookie("csrftoken")}});if(200===a.status){const e=await a.json();t.audioList=e.audioList,t.market=e.setting.marketId,t.lastMarket=e.setting.marketName,t.lastAudio=e.setting.audio,t.audio=e.setting.audio,t.ip=e.ip,t.dateUpdate=e.setting.dateUpdate,t.isLoad="ok"}else t.isLoad="error",this.$emit("showAlert","Ошибка  при обращение к настройкам клиента. Подробности в консоли"),t.errorText="Ошибка при обращение к настройкам клиента. Подробности в консоли"}catch(e){t.isLoad="error",this.$emit("showAlert","Ошибка  при обращение к настройкам клиента. Подробности в консоли"),t.errorText="Ошибка при обращение к настройкам клиента. Подробности в консоли"}},async refresh(){this.isLoad="",await this.getMarket(),this.marketsList&&await this.getLocalSetting()},async save(){try{const t=this.marketsList.findIndex((t=>t.id===this.market)),e=this.marketsList[t].name;this.isLoad="";const a=u.urls.localSetting,o=await fetch(a,{method:"POST",body:JSON.stringify({marketId:this.market,marketName:e,audio:this.audio}),headers:{"Content-Type":"application/json","X-CSRFToken":d.getCookie("csrftoken")}});200===o.status?(this.$emit("showAlert","Синхронизация с CRM прошла"),this.refresh()):this.$emit("showAlert","Ошибка при синхронизации. Подробности в консоли")}catch(t){this.$emit("showAlert","Ошибка при синхронизации. Подробности в консоли")}this.isLoad="ok"}}},m=f,p=a(3736),h=(0,p.Z)(m,s,i,!1,null,"36d0c706",null),k=h.exports,v={components:{HomeView:k},methods:{showAlert(t){this.snackbar=!0,this.snackbarText=t}},data(){return{snackbar:!1,snackbarText:""}}},g=v,b=(0,p.Z)(g,n,r,!1,null,null,null),x=b.exports,C=a(707),w=a.n(C);a(8556);o["default"].use(w());const y={};var _=new(w())(y),T=(a(8937),a(8510)),L=a.n(T);o["default"].config.productionTip=!1,new o["default"]({VueCookie:L(),vuetify:_,render:t=>t(x)}).$mount("#app")},1637:function(t,e,a){t.exports=a.p+"static/front_prod/img/logo2.9ece864f.png"}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,o,n,r){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],n=t[u][1],r=t[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(a.O).every((function(t){return a.O[t](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,r,s=o[0],i=o[1],c=o[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var u=c(a)}for(e&&e(o);l<s.length;l++)r=s[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},o=self["webpackChunkfront"]=self["webpackChunkfront"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(9273)}));o=a.O(o)})();
//# sourceMappingURL=app.0e258f4c.js.map